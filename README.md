# ProductSalesApi
 Spring Boot application that exposes a REST API for managing a list of products and sales.

 Implement a Spring Boot application that exposes a REST API for managing a list of products and sales.
 
# Market API

This repository contains a Spring Boot application for managing a market's product and sales data.

## Table of Contents

- [Overview](#overview)
- [API Documentation](#api-documentation)

## Overview

The Market API project is built using Spring Boot and provides functionalities for managing products and sales in a market. It includes RESTful endpoints for CRUD operations on products, sales, and revenue calculations. Swagger is integrated for API documentation, allowing easy exploration and testing of endpoints.

## Dependencies

- Java 11
- Spring Boot 
- Spring Data JPA
- Spring Security
- Lombok
- Mysql

## Getting Started

### Prerequisites

Before running the application, make sure you have the following installed:

- Java Development Kit (JDK) 11
- Maven (for building and managing dependencies)

### Running the Application

1. Clone the repository:

   ```bash
   git clone https://github.com/yourusername/market-api.git

## API Response Example

### GET /api/products/get/all?page=0&size=10

```json
[
    {
        "id": 1,
        "name": "Product B",
        "description": "Description of Product A",
        "price": 100.0,
        "quantity": 50,
        "sales": [
            {
                "id": 1,
                "saleDate": "2024-07-28",
                "quantity": 15,
                "salePrice": 90.5
            },
            {
                "id": 2,
                "saleDate": "2024-07-28",
                "quantity": 14,
                "salePrice": 86.0
            }
        ]
    }
]

```


### Explanation
- **API Endpoint:** `/api/products/get/all?page=0&size=10`
  - This endpoint retrieves the first page of products with a size of 10 items per page.
- **JSON Response:**
  - The response includes an array of product objects, where each product has fields such as `id`, `name`, `description`, `price`, `quantity`, and an array of `sales`.
  - Each `sale` object within the `sales` array includes fields like `id`, `saleDate`, `quantity`, and `salePrice`.

### GET /api/products/get/{id}

#### Request

- **Method:** GET
- **URL:** `http://localhost:8080/api/products/get/1`

#### Response

```json
{
    "id": 1,
    "name": "Product B",
    "description": "Description of Product A",
    "price": 100.0,
    "quantity": 50,
    "sales": [
        {
            "id": 1,
            "saleDate": "2024-07-28",
            "quantity": 15,
            "salePrice": 90.5,
            "productId": 1
        },
        {
            "id": 2,
            "saleDate": "2024-07-28",
            "quantity": 14,
            "salePrice": 86.0,
            "productId": 1
        }
    ]
}
```
### POST /api/products/create

#### Request

- **Method:** POST
- **URL:** `http://localhost:8080/api/products/create`
- **Headers:** 
  - Content-Type: application/json

#### Request Body

```json
{
  "name": "Product A",
  "description": "Description of Product A",
  "price": 100.0,
  "quantity": 50,
  "sales": [
    {
      "saleDate": "2024-07-28",
      "quantity": 5,
      "salePrice": 90.0
    },
    {
      "saleDate": "2024-07-28",
      "quantity": 10,
      "salePrice": 85.0
    }
  ]
}
```
### DELETE /api/products/delete/{id}

#### Request

- **Method:** DELETE
- **URL:** `http://localhost:8080/api/products/delete/1`

### Explanation

- **API Endpoint:** `/api/products/delete/{id}`
  - This endpoint is used to delete a product identified by `{id}`.
  - Replace `{id}` in the URL with the actual ID of the product you want to delete.

#### Notes

- This request deletes the product with ID `1` from the system.
- Ensure that the user making this request has the necessary permissions to delete products, typically requiring administrative privileges (`ADMIN` role).

This example demonstrates how to send a DELETE request to remove a product from your system. Adjust the endpoint and ID parameter based on your actual API implementation and requirements.

## API Request Example

### GET /api/products/revenue/total

#### Request

- **Method:** GET
- **URL:** `http://localhost:8080/api/products/revenue/total`

### Explanation

- **API Endpoint:** `/api/products/revenue/total`
  - This endpoint retrieves the total revenue generated from all product sales.
  

## API Request Example

### GET /api/products/revenue/{productId}

#### Request

- **Method:** GET
- **URL:** `http://localhost:8080/api/products/revenue/1`
  - Replace `{productId}` in the URL with the actual ID of the product for which you want to retrieve revenue.

### Explanation

- **API Endpoint:** `/api/products/revenue/{productId}`
  - This endpoint retrieves the total revenue generated by sales of a specific product identified by `{productId}`.

#### Response

```json
{
  "productId": 1,
  "productRevenue": 2405.5
}
```

## API Request Example

### PUT /api/products/update/{productId}

#### Request

- **Method:** PUT
- **URL:** `http://localhost:8080/api/products/update/1`
  - Replace `{productId}` in the URL with the actual ID of the product you want to update.

#### Request Body

```json
{
    "id": 1,
    "name": "Product B",
    "description": "Description of Product A",
    "price": 100.0,
    "quantity": 50,
    "sales": [
        {
            "id": 1,
            "saleDate": "2024-07-28",
            "quantity": 15,
            "salePrice": 90.5,
            "productId": 1
        },
        {
            "id": 2,
            "saleDate": "2024-07-28",
            "quantity": 14,
            "salePrice": 86.0,
            "productId": 1
        }
    ]
}
```

# Market API Database Setup

This guide provides instructions for setting up the database `market` required for the Market API project.

## Prerequisites

Before starting, ensure you have the following:

- MySQL or an equivalent relational database management system (RDBMS) installed.
- Access to a MySQL client (e.g., MySQL Workbench, phpMyAdmin) or command-line interface.

## Steps to Create the Database

1. **Connect to MySQL:**
   - Open your MySQL client or command-line interface.

2. **Create the Database:**
   - Run the following SQL command to create the `market` database:

     ```sql
     CREATE DATABASE market;
     ```

3. **Verify Database Creation:**
   - Confirm that the `market` database has been successfully created. You can use the following command in MySQL CLI:

     ```sql
     SHOW DATABASES;
     ```

# Setting Up Database for Market API (using Spring Boot)

This guide provides instructions for configuring the database settings (`market`) required for the Market API project using Spring Boot.

## Prerequisites

Before you begin, ensure you have:

- MySQL installed locally or accessible via a remote server.
- Knowledge of your MySQL server credentials (username and password).
- A working Spring Boot project set up where you need to configure the database.

## Configuration Steps

1. **Modify application.properties (or application.yml):**

   - Navigate to your Spring Boot project and locate the `application.properties` (or `application.yml`) file typically found in the `src/main/resources` directory.

   - Add or modify the following properties to configure your MySQL database connection:

     ```properties
     spring.datasource.url=jdbc:mysql://localhost:3306/market
     spring.datasource.username=root
     spring.datasource.password=toor
     spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
     ```

     Adjust the `url`, `username`, `password`, and `driver-class-name` as per your MySQL server settings.

2. **Verify Configuration:**

   - Ensure the `jdbc:mysql://localhost:3306/market` URL matches your MySQL server's host (`localhost`), port (`3306`), and database name (`market`).

   - Verify that the `spring.datasource.username` and `spring.datasource.password` match your MySQL server credentials.

3. **Start Your Spring Boot Application:**

   - Run your Spring Boot application. Spring Boot will automatically use these configurations to connect to your MySQL database.

4. **Accessing the Database:**

   - Once configured, your Spring Boot application should successfully connect to the `market` database specified.

## Troubleshooting

If your application fails to connect to the database, consider the following troubleshooting steps:

- **Check MySQL Server Status:** Ensure your MySQL server is up and running.
- **Verify Credentials:** Double-check the correctness of your MySQL username and password.
- **Database URL:** Ensure the `jdbc:mysql://localhost:3306/market` URL is correctly formatted and points to the desired database.


## Author
Created by Anugrah Balakrishnan on July 28, 2024.








